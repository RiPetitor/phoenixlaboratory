<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/Rust/Введение в Rust/cargo-basics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Знакомство с системой сборки Cargo | Phoenix Laboratory</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nextgenos.tech/img/phoenix.png"><meta data-rh="true" name="twitter:image" content="https://nextgenos.tech/img/phoenix.png"><meta data-rh="true" property="og:url" content="https://nextgenos.tech/docs/learn/Rust/Введение в Rust/cargo-basics"><meta data-rh="true" property="og:locale" content="ru"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Знакомство с системой сборки Cargo | Phoenix Laboratory"><meta data-rh="true" name="description" content="Подробное изучение системы сборки Cargo - управление проектами, зависимостями и сборочными процессами"><meta data-rh="true" property="og:description" content="Подробное изучение системы сборки Cargo - управление проектами, зависимостями и сборочными процессами"><link data-rh="true" rel="icon" href="/img/fawicon.ico"><link data-rh="true" rel="canonical" href="https://nextgenos.tech/docs/learn/Rust/Введение в Rust/cargo-basics"><link data-rh="true" rel="alternate" href="https://nextgenos.tech/docs/learn/Rust/Введение в Rust/cargo-basics" hreflang="ru"><link data-rh="true" rel="alternate" href="https://nextgenos.tech/docs/learn/Rust/Введение в Rust/cargo-basics" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Знакомство с системой сборки Cargo","item":"https://nextgenos.tech/docs/learn/Rust/Введение в Rust/cargo-basics"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Phoenix Laboratory RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Phoenix Laboratory Atom Feed"><link rel="stylesheet" href="/assets/css/styles.d5cd1142.css">
<script src="/assets/js/runtime~main.2070d2eb.js" defer="defer"></script>
<script src="/assets/js/main.bc092af7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Мой сайт" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Мой сайт" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">PhoenixLab</b></a><a class="navbar__item navbar__link" href="/docs/doces/intro">Документация</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/learn/intro">Обучение</a><a class="navbar__item navbar__link" href="/blog">Блог</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/RiPetitor/phoenixlaboratory" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learn/intro">Обучающeе руководства</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/learn/Rust/Введение в Rust/what-is-rust">Rust</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/learn/Rust/Введение в Rust/what-is-rust">Введение в Rust</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/Rust/Введение в Rust/what-is-rust">Что такое Rust и зачем его изучать</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/Rust/Введение в Rust/installation">Установка Rust и настройка среды разработки</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/Rust/Введение в Rust/first-program">Первая программа &quot;Hello, World!&quot;</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/learn/Rust/Введение в Rust/cargo-basics">Знакомство с системой сборки Cargo</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/learn/Rust/Основы синтаксиса/variables">Основы синтаксиса</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/learn/С/Обучающее руководство по С/intro">С</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Навигационная цепочка текущей страницы"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Главная страница" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Rust</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Введение в Rust</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Знакомство с системой сборки Cargo</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Содержание этой страницы</button></div><div class="theme-doc-markdown markdown"><header><h1>Знакомство с системой сборки Cargo</h1></header>
<p><strong>Cargo</strong> — это официальная система сборки и пакетный менеджер для Rust. В этой главе мы глубоко изучим возможности Cargo: от создания проектов до управления зависимостями и настройки сложных сборочных процессов.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="что-такое-cargo">Что такое Cargo?<a href="#что-такое-cargo" class="hash-link" aria-label="Прямая ссылка на Что такое Cargo?" title="Прямая ссылка на Что такое Cargo?">​</a></h2>
<p>Cargo выполняет множество задач в экосистеме Rust:</p>
<div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:15px;margin-bottom:20px"><div style="border:1px solid var(--ifm-color-emphasis-300);padding:15px;border-radius:8px"><h4>📦 Пакетный менеджер</h4><p>Управление внешними библиотеками и зависимостями</p></div><div style="border:1px solid var(--ifm-color-emphasis-300);padding:15px;border-radius:8px"><h4>🔧 Система сборки</h4><p>Компиляция, тестирование и создание исполняемых файлов</p></div><div style="border:1px solid var(--ifm-color-emphasis-300);padding:15px;border-radius:8px"><h4>📋 Менеджер проектов</h4><p>Создание и организация структуры Rust-проектов</p></div><div style="border:1px solid var(--ifm-color-emphasis-300);padding:15px;border-radius:8px"><h4>📚 Генератор документации</h4><p>Автоматическое создание документации из кода</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Философия Cargo</div><div class="admonitionContent_BuS1"><p>Cargo следует принципу <strong>&quot;конвенция вместо конфигурации&quot;</strong> — большинство стандартных задач работают &quot;из коробки&quot; без дополнительной настройки.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="типы-проектов-cargo">Типы проектов Cargo<a href="#типы-проектов-cargo" class="hash-link" aria-label="Прямая ссылка на Типы проектов Cargo" title="Прямая ссылка на Типы проектов Cargo">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="бинарные-проекты-приложения">Бинарные проекты (приложения)<a href="#бинарные-проекты-приложения" class="hash-link" aria-label="Прямая ссылка на Бинарные проекты (приложения)" title="Прямая ссылка на Бинарные проекты (приложения)">​</a></h3>
<p><strong>Создание приложения:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Создание бинарного проекта</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo new my_app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd my_app</span><br></span></code></pre></div></div>
<p><strong>Структура:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_app/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── main.rs      # Точка входа приложения</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── .gitignore</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="библиотечные-проекты-крейты">Библиотечные проекты (крейты)<a href="#библиотечные-проекты-крейты" class="hash-link" aria-label="Прямая ссылка на Библиотечные проекты (крейты)" title="Прямая ссылка на Библиотечные проекты (крейты)">​</a></h3>
<p><strong>Создание библиотеки:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Создание библиотечного проекта</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo new my_lib --lib</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd my_lib</span><br></span></code></pre></div></div>
<p><strong>Структура:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_lib/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── lib.rs       # Корень библиотеки</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── .gitignore</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="смешанные-проекты">Смешанные проекты<a href="#смешанные-проекты" class="hash-link" aria-label="Прямая ссылка на Смешанные проекты" title="Прямая ссылка на Смешанные проекты">​</a></h3>
<p><strong>Проект с библиотекой и приложением:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_project/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── main.rs      # Бинарное приложение</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── lib.rs       # Библиотека</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── examples/        # Примеры использования</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── tests/          # Интеграционные тесты</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── benches/        # Бенчмарки производительности</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="глубокое-изучение-cargotoml">Глубокое изучение Cargo.toml<a href="#глубокое-изучение-cargotoml" class="hash-link" aria-label="Прямая ссылка на Глубокое изучение Cargo.toml" title="Прямая ссылка на Глубокое изучение Cargo.toml">​</a></h2>
<p>Файл <code>Cargo.toml</code> — это сердце любого Rust-проекта. Рассмотрим все его возможности:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="секция-package">Секция [package]<a href="#секция-package" class="hash-link" aria-label="Прямая ссылка на Секция [package]" title="Прямая ссылка на Секция [package]">​</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Основные поля</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Дополнительные поля</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Метаданные</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Базовая информация о пакете</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;my_awesome_app&quot;           # Имя пакета (обязательно)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version = &quot;0.1.0&quot;                 # Версия (обязательно)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edition = &quot;2021&quot;                  # Версия языка (обязательно)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authors = [&quot;Ваше Имя &lt;email@example.com&gt;&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">description = &quot;Описание проекта&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">license = &quot;MIT&quot;                   # Лицензия</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">repository = &quot;https://github.com/user/repo&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">homepage = &quot;https://example.com&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">documentation = &quot;https://docs.example.com&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">readme = &quot;README.md&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">keywords = [&quot;web&quot;, &quot;api&quot;, &quot;server&quot;]  # До 5 ключевых слов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">categories = [&quot;web-programming&quot;]      # Категории на crates.io</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Продвинутые настройки пакета</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;my_app&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version = &quot;1.2.3&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edition = &quot;2021&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rust-version = &quot;1.70&quot;            # Минимальная версия Rust</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">publish = false                  # Запретить публикацию на crates.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">autobins = true                  # Автообнаружение бинарных файлов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">autoexamples = true              # Автообнаружение примеров</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">autotests = true                 # Автообнаружение тестов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">autobenches = true               # Автообнаружение бенчмарков</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Настройки сборки</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">build = &quot;build.rs&quot;               # Скрипт предсборки</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">exclude = [&quot;docs/&quot;, &quot;*.tmp&quot;]     # Исключить из пакета</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">include = [&quot;src/**/*&quot;, &quot;Cargo.toml&quot;]  # Включить в пакет</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Пользовательские метаданные</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;my_app&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version = &quot;0.1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edition = &quot;2021&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package.metadata]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Пользовательские данные для инструментов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">msrv = &quot;1.70.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package.metadata.docs.rs]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Настройки для docs.rs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">all-features = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rustdoc-args = [&quot;--cfg&quot;, &quot;docsrs&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package.metadata.bundle]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Настройки для создания пакетов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;My App&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">identifier = &quot;com.example.myapp&quot;</span><br></span></code></pre></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="секция-dependencies">Секция [dependencies]<a href="#секция-dependencies" class="hash-link" aria-label="Прямая ссылка на Секция [dependencies]" title="Прямая ссылка на Секция [dependencies]">​</a></h3>
<p>Зависимости — это внешние библиотеки, которые использует ваш проект:</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Простые зависимости</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">С функциональностью</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Разные источники</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Основные способы указания зависимостей</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Простая зависимость из crates.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde = &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Точная версия</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rand = &quot;=0.8.5&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Диапазон версий</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tokio = &quot;&gt;=1.0, &lt;2.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Совместимые версии (рекомендуется)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">reqwest = &quot;^0.11&quot;      # эквивалентно &quot;&gt;=0.11.0, &lt;0.12.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">clap = &quot;~4.1.6&quot;        # эквивалентно &quot;&gt;=4.1.6, &lt;4.2.0&quot;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Управление функциональностью</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Включение конкретных функций</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tokio = { version = &quot;1.0&quot;, features = [&quot;full&quot;] }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde = { version = &quot;1.0&quot;, features = [&quot;derive&quot;] }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sqlx = { version = &quot;0.7&quot;, features = [&quot;runtime-tokio-rustls&quot;, &quot;postgres&quot;] }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Отключение стандартных функций</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ring = { version = &quot;0.16&quot;, default-features = false }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Опциональные зависимости</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uuid = { version = &quot;1.0&quot;, optional = true }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chrono = { version = &quot;0.4&quot;, optional = true }</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Альтернативные источники зависимостей</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Из crates.io (стандартный способ)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde = &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Из Git-репозитория</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_lib = { git = &quot;https://github.com/user/my_lib.git&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">other_lib = { git = &quot;https://github.com/user/other_lib&quot;, branch = &quot;development&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tagged_lib = { git = &quot;https://github.com/user/tagged_lib&quot;, tag = &quot;v1.0.0&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">commit_lib = { git = &quot;https://github.com/user/commit_lib&quot;, rev = &quot;abc123&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Локальный путь (для разработки)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local_lib = { path = &quot;../my_local_lib&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">workspace_lib = { path = &quot;libs/workspace_lib&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Переименование крейта</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">actix-rt = { package = &quot;tokio&quot;, version = &quot;1.0&quot; }</span><br></span></code></pre></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="другие-типы-зависимостей">Другие типы зависимостей<a href="#другие-типы-зависимостей" class="hash-link" aria-label="Прямая ссылка на Другие типы зависимостей" title="Прямая ссылка на Другие типы зависимостей">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Специальные типы зависимостей</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[dev-dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Зависимости только для тестов и разработки</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">assert_cmd = &quot;2.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tempfile = &quot;3.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">criterion = &quot;0.4&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[build-dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Зависимости для скриптов сборки (build.rs)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cc = &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pkg-config = &quot;0.3&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[target.&#x27;cfg(windows)&#x27;.dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Зависимости для конкретных платформ</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">winapi = { version = &quot;0.3&quot;, features = [&quot;winuser&quot;] }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[target.&#x27;cfg(unix)&#x27;.dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">libc = &quot;0.2&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="управление-функциональностью-features">Управление функциональностью (Features)<a href="#управление-функциональностью-features" class="hash-link" aria-label="Прямая ссылка на Управление функциональностью (Features)" title="Прямая ссылка на Управление функциональностью (Features)">​</a></h2>
<p><strong>Features</strong> позволяют условно включать код и зависимости:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="определение-функций">Определение функций<a href="#определение-функций" class="hash-link" aria-label="Прямая ссылка на Определение функций" title="Прямая ссылка на Определение функций">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Cargo.toml - определение features</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;my_lib&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version = &quot;0.1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edition = &quot;2021&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[features]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">default = [&quot;json&quot;]               # Функции по умолчанию</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">json = [&quot;dep:serde_json&quot;]        # Функция включает зависимость</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">xml = [&quot;dep:serde_xml_rs&quot;]       # Альтернативная функция</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">full = [&quot;json&quot;, &quot;xml&quot;, &quot;extra&quot;]  # Мета-функция</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">extra = []                       # Пустая функция для условной компиляции</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde = &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde_json = { version = &quot;1.0&quot;, optional = true }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde_xml_rs = { version = &quot;0.5&quot;, optional = true }</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="использование-в-коде">Использование в коде<a href="#использование-в-коде" class="hash-link" aria-label="Прямая ссылка на Использование в коде" title="Прямая ссылка на Использование в коде">​</a></h3>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">src/lib.rs - условная компиляция</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Код включается только если активна функция &quot;json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">#[cfg(feature = </span><span class="token attribute attr-name string" style="color:rgb(255, 121, 198)">&quot;json&quot;</span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(80, 250, 123)">parse_json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-&gt;</span><span class="token plain"> </span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token namespace">serde_json</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token namespace">serde_json</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token namespace">serde_json</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">from_str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Код включается только если активна функция &quot;xml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">#[cfg(feature = </span><span class="token attribute attr-name string" style="color:rgb(255, 121, 198)">&quot;xml&quot;</span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(80, 250, 123)">parse_xml</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-&gt;</span><span class="token plain"> </span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token namespace">serde_xml_rs</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token namespace">serde_xml_rs</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token namespace">serde_xml_rs</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">from_str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Код включается если активна любая из функций</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">#[cfg(any(feature = </span><span class="token attribute attr-name string" style="color:rgb(255, 121, 198)">&quot;json&quot;</span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">, feature = </span><span class="token attribute attr-name string" style="color:rgb(255, 121, 198)">&quot;xml&quot;</span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">))]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(80, 250, 123)">supported_formats</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-&gt;</span><span class="token plain"> </span><span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol" style="color:rgb(248, 248, 242)">&#x27;static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">str</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mut</span><span class="token plain"> formats </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Vec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">#[cfg(feature = </span><span class="token attribute attr-name string" style="color:rgb(255, 121, 198)">&quot;json&quot;</span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    formats</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;json&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">#[cfg(feature = </span><span class="token attribute attr-name string" style="color:rgb(255, 121, 198)">&quot;xml&quot;</span><span class="token attribute attr-name" style="color:rgb(241, 250, 140)">)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    formats</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xml&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    formats</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="сборка-с-функциями">Сборка с функциями<a href="#сборка-с-функциями" class="hash-link" aria-label="Прямая ссылка на Сборка с функциями" title="Прямая ссылка на Сборка с функциями">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Команды для работы с функциями</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Сборка с функциями по умолчанию</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Сборка без функций по умолчанию</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --no-default-features</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Сборка с конкретными функциями</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --features=&quot;json xml&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Сборка со всеми функциями</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --all-features</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Тестирование разных комбинаций функций</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test --features=&quot;json&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test --features=&quot;xml&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test --all-features</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="рабочие-области-workspaces">Рабочие области (Workspaces)<a href="#рабочие-области-workspaces" class="hash-link" aria-label="Прямая ссылка на Рабочие области (Workspaces)" title="Прямая ссылка на Рабочие области (Workspaces)">​</a></h2>
<p><strong>Workspaces</strong> позволяют управлять несколькими связанными пакетами:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="создание-workspace">Создание workspace<a href="#создание-workspace" class="hash-link" aria-label="Прямая ссылка на Создание workspace" title="Прямая ссылка на Создание workspace">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Cargo.toml в корне workspace</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[workspace]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">members = [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;server&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;client&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;shared&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;tools/*&quot;,        # Wildcard для подпапок</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">exclude = [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;legacy&quot;,         # Исключить из workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;experimental/*&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">resolver = &quot;2&quot;        # Использовать новый resolver</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[workspace.dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Общие зависимости для всех пакетов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde = { version = &quot;1.0&quot;, features = [&quot;derive&quot;] }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tokio = { version = &quot;1.0&quot;, features = [&quot;full&quot;] }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">anyhow = &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[workspace.metadata]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Метаданные workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rust-version = &quot;1.70&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="структура-workspace">Структура workspace<a href="#структура-workspace" class="hash-link" aria-label="Прямая ссылка на Структура workspace" title="Прямая ссылка на Структура workspace">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">my_workspace/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Cargo.toml          # Корневой манифест workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Cargo.lock          # Единый lock-файл для всего workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── server/             # Пакет сервера</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── client/             # Пакет клиента</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── shared/             # Общая библиотека</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── Cargo.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── src/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── target/             # Общая папка сборки</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="использование-в-пакетах-workspace">Использование в пакетах workspace<a href="#использование-в-пакетах-workspace" class="hash-link" aria-label="Прямая ссылка на Использование в пакетах workspace" title="Прямая ссылка на Использование в пакетах workspace">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">server/Cargo.toml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;server&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version = &quot;0.1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edition = &quot;2021&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Использование общих зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serde = { workspace = true }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tokio = { workspace = true }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Локальная зависимость из workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shared = { path = &quot;../shared&quot; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Дополнительные зависимости</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">axum = &quot;0.6&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="команды-для-workspace">Команды для workspace<a href="#команды-для-workspace" class="hash-link" aria-label="Прямая ссылка на Команды для workspace" title="Прямая ссылка на Команды для workspace">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Работа с workspace</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Сборка всех пакетов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Сборка конкретного пакета</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build -p server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Тестирование всех пакетов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test --workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Выпуск всех пакетов в release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --workspace --release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Просмотр дерева зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo tree</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Обновление всех зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo update</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="профили-сборки">Профили сборки<a href="#профили-сборки" class="hash-link" aria-label="Прямая ссылка на Профили сборки" title="Прямая ссылка на Профили сборки">​</a></h2>
<p>Профили позволяют настроить параметры компиляции:</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Встроенные профили</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Пользовательские профили</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Для отдельных пакетов</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Настройка встроенных профилей</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Отладочный профиль (cargo build)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.dev]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opt-level = 0          # Без оптимизаций (быстрая компиляция)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug = true           # Включить отладочную информацию</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">split-debuginfo = &#x27;unpacked&#x27;  # Формат отладочной информации</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug-assertions = true       # Включить проверки assert!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">overflow-checks = true        # Проверка переполнения целых чисел</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lto = false           # Отключить Link Time Optimization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">panic = &#x27;unwind&#x27;      # Стратегия обработки panic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">incremental = true    # Включить инкрементальную компиляцию</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">codegen-units = 256   # Количество единиц кодогенерации</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Релизный профиль (cargo build --release)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.release]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opt-level = 3         # Максимальные оптимизации</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug = false         # Отключить отладочную информацию</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug-assertions = false    # Отключить проверки assert!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">overflow-checks = false     # Отключить проверки переполнения</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lto = false          # Link Time Optimization</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">panic = &#x27;unwind&#x27;     # Стратегия обработки panic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">incremental = false  # Отключить инкрементальную компиляцию</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">codegen-units = 16   # Меньше единиц для лучшей оптимизации</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Создание собственных профилей</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Профиль для бенчмарков</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.bench]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opt-level = 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug = false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rpath = false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lto = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug-assertions = false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">codegen-units = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Профиль для тестирования производительности</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.profiling]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">inherits = &quot;release&quot;    # Наследовать от release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug = 1              # Частичная отладочная информация</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">strip = false          # Не удалять символы</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Минимальный размер исполняемого файла</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.min-size]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">inherits = &quot;release&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opt-level = &#x27;z&#x27;        # Оптимизация размера</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lto = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">panic = &#x27;abort&#x27;        # Прерывание вместо разворачивания стека</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">strip = true           # Удалить отладочные символы</span><br></span></code></pre></div></div><p><strong>Использование пользовательских профилей:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --profile=profiling</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --profile=min-size</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Настройки для конкретных зависимостей</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Оптимизировать конкретные зависимости даже в debug режиме</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.dev.package.image]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opt-level = 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.dev.package.serde]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opt-level = 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Настройки для всех зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[profile.dev.package.&quot;*&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">opt-level = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">debug = false</span><br></span></code></pre></div></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="скрипты-сборки-buildrs">Скрипты сборки (build.rs)<a href="#скрипты-сборки-buildrs" class="hash-link" aria-label="Прямая ссылка на Скрипты сборки (build.rs)" title="Прямая ссылка на Скрипты сборки (build.rs)">​</a></h2>
<p>Скрипты сборки выполняются перед компиляцией основного кода:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="создание-buildrs">Создание build.rs<a href="#создание-buildrs" class="hash-link" aria-label="Прямая ссылка на Создание build.rs" title="Прямая ссылка на Создание build.rs">​</a></h3>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">build.rs в корне проекта</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> </span><span class="token namespace">std</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> </span><span class="token namespace">std</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token namespace">fs</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">File</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> </span><span class="token namespace">std</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token namespace">io</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Write</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> </span><span class="token namespace">std</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token namespace">path</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Переменные окружения от Cargo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> out_dir </span><span class="token operator">=</span><span class="token plain"> </span><span class="token namespace">env</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">var</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;OUT_DIR&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">unwrap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> dest_path </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">out_dir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;hello.rs&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Генерация кода</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mut</span><span class="token plain"> f </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">File</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">dest_path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">unwrap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">write_all</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">b&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        pub fn generated_hello() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            println!(\&quot;Hello from generated code!\&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">    &quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">unwrap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Указываем Cargo перекомпилировать при изменении файлов</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cargo:rerun-if-changed=build.rs&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cargo:rerun-if-changed=src/&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Устанавливаем переменные окружения для главного кода</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cargo:rustc-env=BUILD_TIME={}&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token namespace">chrono</span><span class="token namespace punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token class-name">Utc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Передаём флаги компилятору</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cargo:rustc-link-lib=static=mylib&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cargo:rustc-link-search=native=/path/to/lib&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="использование-в-mainrs">Использование в main.rs<a href="#использование-в-mainrs" class="hash-link" aria-label="Прямая ссылка на Использование в main.rs" title="Прямая ссылка на Использование в main.rs">​</a></h3>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">src/main.rs</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Подключение сгенерированного кода</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property">include!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property">concat!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token macro property">env!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;OUT_DIR&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/hello.rs&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">generated_hello</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Использование переменной из build.rs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Собрано в: {}&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token macro property">env!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;BUILD_TIME&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="зависимости-для-buildrs">Зависимости для build.rs<a href="#зависимости-для-buildrs" class="hash-link" aria-label="Прямая ссылка на Зависимости для build.rs" title="Прямая ссылка на Зависимости для build.rs">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Cargo.toml с build-зависимостями</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;my_app&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version = &quot;0.1.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edition = &quot;2021&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">build = &quot;build.rs&quot;      # Указываем скрипт сборки</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[build-dependencies]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chrono = { version = &quot;0.4&quot;, features = [&quot;serde&quot;] }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cc = &quot;1.0&quot;              # Для компиляции C кода</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bindgen = &quot;0.60&quot;        # Для генерации биндингов</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="продвинутые-команды-cargo">Продвинутые команды Cargo<a href="#продвинутые-команды-cargo" class="hash-link" aria-label="Прямая ссылка на Продвинутые команды Cargo" title="Прямая ссылка на Продвинутые команды Cargo">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="информационные-команды">Информационные команды<a href="#информационные-команды" class="hash-link" aria-label="Прямая ссылка на Информационные команды" title="Прямая ссылка на Информационные команды">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Получение информации о проекте</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Информация о проекте и зависимостях</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo metadata --format-version=1 | jq</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Дерево зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo tree</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Дерево с конкретными функциями</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo tree --features=&quot;json xml&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Обратные зависимости</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo tree --invert serde</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Дублирующиеся зависимости</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo tree --duplicates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Размеры в скомпилированном файле</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo bloat --release --crates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Время компиляции зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo build --timings</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="команды-очистки-и-обслуживания">Команды очистки и обслуживания<a href="#команды-очистки-и-обслуживания" class="hash-link" aria-label="Прямая ссылка на Команды очистки и обслуживания" title="Прямая ссылка на Команды очистки и обслуживания">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Очистка и обслуживание проекта</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Очистка папки target</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo clean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Очистка только release артефактов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo clean --release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Очистка конкретного пакета в workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo clean -p my_package</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Проверка неиспользуемых зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo machete</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Обновление зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Обновление конкретной зависимости</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo update -p serde</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Аудит безопасности зависимостей</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo audit</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="команды-тестирования">Команды тестирования<a href="#команды-тестирования" class="hash-link" aria-label="Прямая ссылка на Команды тестирования" title="Прямая ссылка на Команды тестирования">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Расширенное тестирование</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Тестирование с выводом результатов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test -- --nocapture</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Параллельное выполнение тестов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test -- --test-threads=4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Тестирование конкретного теста</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test test_name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Тестирование с конкретными функциями</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test --features=&quot;json xml&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Тестирование документации</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo test --doc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Бенчмарки (только на nightly)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo +nightly bench</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="публикация-пакетов">Публикация пакетов<a href="#публикация-пакетов" class="hash-link" aria-label="Прямая ссылка на Публикация пакетов" title="Прямая ссылка на Публикация пакетов">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="подготовка-к-публикации">Подготовка к публикации<a href="#подготовка-к-публикации" class="hash-link" aria-label="Прямая ссылка на Подготовка к публикации" title="Прямая ссылка на Подготовка к публикации">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Проверка перед публикацией</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Сухой запуск публикации</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo publish --dry-run</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Проверка пакета</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo package</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Просмотр содержимого пакета</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo package --list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Локальная установка для тестирования</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo install --path .</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="настройка-публикации">Настройка публикации<a href="#настройка-публикации" class="hash-link" aria-label="Прямая ссылка на Настройка публикации" title="Прямая ссылка на Настройка публикации">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Cargo.toml для публикации</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[package]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name = &quot;my_awesome_lib&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">version = &quot;1.0.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edition = &quot;2021&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authors = [&quot;Your Name &lt;email@example.com&gt;&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">description = &quot;Краткое описание библиотеки&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">license = &quot;MIT OR Apache-2.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">repository = &quot;https://github.com/username/my_awesome_lib&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">documentation = &quot;https://docs.rs/my_awesome_lib&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">homepage = &quot;https://my-awesome-lib.example.com&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">readme = &quot;README.md&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">keywords = [&quot;parser&quot;, &quot;json&quot;, &quot;data&quot;]  # До 5 ключевых слов</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">categories = [&quot;parsing&quot;, &quot;data-structures&quot;]  # Категории с crates.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Исключить ненужные файлы из публикации</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">exclude = [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;tests/fixtures/*&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;*.tmp&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;docs/internal/*&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Или включить только нужные</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">include = [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;src/**/*&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;Cargo.toml&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;README.md&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;LICENSE*&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="публикация">Публикация<a href="#публикация" class="hash-link" aria-label="Прямая ссылка на Публикация" title="Прямая ссылка на Публикация">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_OeMC">Процесс публикации</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Авторизация в crates.io (один раз)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo login YOUR_API_TOKEN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Публикация</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo publish</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Отзыв версии (только в течение 72 часов)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo yank --vers 1.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Отмена отзыва</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo yank --vers 1.0.0 --undo</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="заключение">Заключение<a href="#заключение" class="hash-link" aria-label="Прямая ссылка на Заключение" title="Прямая ссылка на Заключение">​</a></h2>
<p>В этой главе мы детально изучили Cargo:</p>
<p>✅ <strong>Типы проектов</strong> — бинарные, библиотечные, смешанные
✅ <strong>Глубокую структуру Cargo.toml</strong> — все секции и возможности
✅ <strong>Управление зависимостями</strong> — источники, версии, функции
✅ <strong>Рабочие области</strong> — организацию больших проектов
✅ <strong>Профили сборки</strong> — оптимизацию компиляции
✅ <strong>Скрипты сборки</strong> — кодогенерацию и интеграцию
✅ <strong>Продвинутые команды</strong> — для профессиональной разработки</p>
<p>Cargo — это мощный инструмент, который делает разработку на Rust продуктивной и приятной. Понимание его возможностей критически важно для эффективной работы с языком.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Что дальше?</div><div class="admonitionContent_BuS1"><p>В следующей главе: <strong>&quot;Переменные и мутабельность&quot;</strong> — мы начнём изучать основы синтаксиса Rust, начиная с переменных и понятия изменяемости.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="практические-задания">Практические задания<a href="#практические-задания" class="hash-link" aria-label="Прямая ссылка на Практические задания" title="Прямая ссылка на Практические задания">​</a></h3>
<ol>
<li><strong>Создайте workspace</strong> с библиотекой и двумя приложениями, использующими эту библиотеку</li>
<li><strong>Настройте пользовательские features</strong> для условной компиляции разных функций</li>
<li><strong>Создайте build.rs скрипт</strong>, генерирующий код на основе переменных окружения</li>
<li><strong>Оптимизируйте профили сборки</strong> для минимального размера исполняемого файла</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="вопросы-для-самопроверки">Вопросы для самопроверки<a href="#вопросы-для-самопроверки" class="hash-link" aria-label="Прямая ссылка на Вопросы для самопроверки" title="Прямая ссылка на Вопросы для самопроверки">​</a></h3>
<ol>
<li>В чём разница между <code>[dependencies]</code>, <code>[dev-dependencies]</code> и <code>[build-dependencies]</code>?</li>
<li>Как работают workspace и какие преимущества они дают?</li>
<li>Что такое features и как они влияют на размер скомпилированного кода?</li>
<li>Когда нужны скрипты сборки (build.rs)?</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="полезные-ссылки">Полезные ссылки<a href="#полезные-ссылки" class="hash-link" aria-label="Прямая ссылка на Полезные ссылки" title="Прямая ссылка на Полезные ссылки">​</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/cargo/" target="_blank" rel="noopener noreferrer">The Cargo Book</a></li>
<li><a href="https://crates.io/" target="_blank" rel="noopener noreferrer">Crates.io</a> — официальный реестр пакетов</li>
<li><a href="https://docs.rs/" target="_blank" rel="noopener noreferrer">Docs.rs</a> — документация для всех пакетов</li>
<li><a href="https://doc.rust-lang.org/cargo/reference/manifest.html" target="_blank" rel="noopener noreferrer">Cargo.toml Reference</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/RiPetitor/phoenixlaboratory/edit/main/docs/learn/Rust/Введение в Rust/04-cargo-basics.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Отредактировать эту страницу</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Страница документа"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/learn/Rust/Введение в Rust/first-program"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">Первая программа &quot;Hello, World!&quot;</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/learn/Rust/Основы синтаксиса/variables"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">Переменные и мутабельность</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#что-такое-cargo" class="table-of-contents__link toc-highlight">Что такое Cargo?</a></li><li><a href="#типы-проектов-cargo" class="table-of-contents__link toc-highlight">Типы проектов Cargo</a><ul><li><a href="#бинарные-проекты-приложения" class="table-of-contents__link toc-highlight">Бинарные проекты (приложения)</a></li><li><a href="#библиотечные-проекты-крейты" class="table-of-contents__link toc-highlight">Библиотечные проекты (крейты)</a></li><li><a href="#смешанные-проекты" class="table-of-contents__link toc-highlight">Смешанные проекты</a></li></ul></li><li><a href="#глубокое-изучение-cargotoml" class="table-of-contents__link toc-highlight">Глубокое изучение Cargo.toml</a><ul><li><a href="#секция-package" class="table-of-contents__link toc-highlight">Секция [package]</a></li><li><a href="#секция-dependencies" class="table-of-contents__link toc-highlight">Секция [dependencies]</a></li><li><a href="#другие-типы-зависимостей" class="table-of-contents__link toc-highlight">Другие типы зависимостей</a></li></ul></li><li><a href="#управление-функциональностью-features" class="table-of-contents__link toc-highlight">Управление функциональностью (Features)</a><ul><li><a href="#определение-функций" class="table-of-contents__link toc-highlight">Определение функций</a></li><li><a href="#использование-в-коде" class="table-of-contents__link toc-highlight">Использование в коде</a></li><li><a href="#сборка-с-функциями" class="table-of-contents__link toc-highlight">Сборка с функциями</a></li></ul></li><li><a href="#рабочие-области-workspaces" class="table-of-contents__link toc-highlight">Рабочие области (Workspaces)</a><ul><li><a href="#создание-workspace" class="table-of-contents__link toc-highlight">Создание workspace</a></li><li><a href="#структура-workspace" class="table-of-contents__link toc-highlight">Структура workspace</a></li><li><a href="#использование-в-пакетах-workspace" class="table-of-contents__link toc-highlight">Использование в пакетах workspace</a></li><li><a href="#команды-для-workspace" class="table-of-contents__link toc-highlight">Команды для workspace</a></li></ul></li><li><a href="#профили-сборки" class="table-of-contents__link toc-highlight">Профили сборки</a></li><li><a href="#скрипты-сборки-buildrs" class="table-of-contents__link toc-highlight">Скрипты сборки (build.rs)</a><ul><li><a href="#создание-buildrs" class="table-of-contents__link toc-highlight">Создание build.rs</a></li><li><a href="#использование-в-mainrs" class="table-of-contents__link toc-highlight">Использование в main.rs</a></li><li><a href="#зависимости-для-buildrs" class="table-of-contents__link toc-highlight">Зависимости для build.rs</a></li></ul></li><li><a href="#продвинутые-команды-cargo" class="table-of-contents__link toc-highlight">Продвинутые команды Cargo</a><ul><li><a href="#информационные-команды" class="table-of-contents__link toc-highlight">Информационные команды</a></li><li><a href="#команды-очистки-и-обслуживания" class="table-of-contents__link toc-highlight">Команды очистки и обслуживания</a></li><li><a href="#команды-тестирования" class="table-of-contents__link toc-highlight">Команды тестирования</a></li></ul></li><li><a href="#публикация-пакетов" class="table-of-contents__link toc-highlight">Публикация пакетов</a><ul><li><a href="#подготовка-к-публикации" class="table-of-contents__link toc-highlight">Подготовка к публикации</a></li><li><a href="#настройка-публикации" class="table-of-contents__link toc-highlight">Настройка публикации</a></li><li><a href="#публикация" class="table-of-contents__link toc-highlight">Публикация</a></li></ul></li><li><a href="#заключение" class="table-of-contents__link toc-highlight">Заключение</a><ul><li><a href="#практические-задания" class="table-of-contents__link toc-highlight">Практические задания</a></li><li><a href="#вопросы-для-самопроверки" class="table-of-contents__link toc-highlight">Вопросы для самопроверки</a></li><li><a href="#полезные-ссылки" class="table-of-contents__link toc-highlight">Полезные ссылки</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 PhoenixLab. Создано с ❤️ для изучения нового!</div></div></div></footer></div>
</body>
</html>